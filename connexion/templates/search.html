{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
  <h1>Résultats de recherche</h1>
  <div class="row">
    <div class="row">
    {% if results %}

      {% for result in results %}   
      <div class="card col-lg-4 col-md-6 mb-3 ">
        {% if result.image == "http://default" and result.id < 35 %}
        <a href="{%url 'detail' result.id %}">
          <img src="https://via.assets.so/game.jpg?w=1280&h=720"
          class="card-img-top "  alt="Image de l'article" style="width: 100%; height: 300px; object-fit: cover;" />
        </a>
        {% elif result.image == "http://default" and result.id > 34 %}
        <a href="{%url 'detail' result.id %}">
          <img src="https://lipsum.app/random/1600x900"
          class="card-img-top "  alt="Image de l'article" style="width: 100%; height: 300px; object-fit: cover;" />
        </a>
        {% else %}
        <a href="{%url 'detail' result.id %}">
          <img src="{{result.image.url}}" class="card-img-top "  alt="Image de l'article" style="width: 100%; height: 300px; object-fit: cover;" />
        </a>
        {% endif %}
        <div class="card-body" style="height:280px; width: 500;">
          <h5 class="card-title"><a href="{%url 'detail' result.id %}">{{result.title}}</h5></a>
          <p class="card-text">{{result.desc|truncatewords:2}}</p>
          <p class="card-text">Publié il y a {{result.created_at|timesince}}</p>
          <a href="{%url 'detail' result.id %}" class="btn btn-primary" data-mdb-ripple-init>Lire la suite</a>
        </div>
      </div>
      {% endfor %}

    {% else %}
      <p>Aucun résultat trouvé pour "{{ query }}".</p>

    {% endif %} 
    </div>
  </div>  
</div>
{% endblock %}
